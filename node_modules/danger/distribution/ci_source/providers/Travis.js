"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var ci_source_helpers_1 = require("../ci_source_helpers");
/**
 * ### CI Setup
 *  You need to edit your `.travis.yml` to include `yarn danger`. If you already have
 *  a `script:` section then we recommend adding this command at the end of the script step: `- yarn danger`.
 *
 *   Otherwise, add a `before_script` step to the root of the `.travis.yml` with `yarn danger`
 *
 *   ```ruby
 *     before_script:
 *       - yarn danger
 *   ```
 *
 *  Adding this to your `.travis.yml` allows Danger to fail your build, both on the TravisCI website and within your Pull Request.
 *  With that set up, you can edit your job to add `yarn danger` at the build action.
 *
 *  ### Token Setup
 *
 *  You need to add the `DANGER_GITHUB_API_TOKEN` environment variable, to do this,
 *  go to your repo's settings, which should look like: `https://travis-ci.org/[user]/[repo]/settings`.
 *
 *  If you have an open source project, you should ensure "Display value in build log" enabled, so that PRs from forks work.
 */
var Travis = (function () {
    function Travis(env) {
        this.env = env;
    }
    Object.defineProperty(Travis.prototype, "name", {
        get: function () {
            return "Travis CI";
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Travis.prototype, "isCI", {
        get: function () {
            return ci_source_helpers_1.ensureEnvKeysExist(this.env, ["HAS_JOSH_K_SEAL_OF_APPROVAL"]);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Travis.prototype, "isPR", {
        get: function () {
            var mustHave = ["HAS_JOSH_K_SEAL_OF_APPROVAL", "TRAVIS_PULL_REQUEST", "TRAVIS_REPO_SLUG"];
            var mustBeInts = ["TRAVIS_PULL_REQUEST"];
            return ci_source_helpers_1.ensureEnvKeysExist(this.env, mustHave) && ci_source_helpers_1.ensureEnvKeysAreInt(this.env, mustBeInts);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Travis.prototype, "pullRequestID", {
        get: function () {
            return this.env.TRAVIS_PULL_REQUEST;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Travis.prototype, "repoSlug", {
        get: function () {
            return this.env.TRAVIS_REPO_SLUG;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Travis.prototype, "supportedPlatforms", {
        get: function () {
            return ["github"];
        },
        enumerable: true,
        configurable: true
    });
    return Travis;
}());
exports.Travis = Travis;
//# sourceMappingURL=Travis.js.map